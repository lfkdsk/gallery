<!-- @format -->



<!DOCTYPE html>
<html lang="zh-CN">
<!-- Head tag -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <!--360 使用 Google Chrome Frame-->
  <meta name="renderer" content="webkit">
  <!--百度禁止转码-->
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <!--Description-->
  
  <meta name="description" content="拿起相机，认真思考">
  
  <meta name="google-site-verification" content="J4gssmXGNI9-DfJ9w52mL5KFPlRCYvySveEN0RJFZHU" />
  <!--Author-->
  
  <meta name="author" content="lfkdsk">
  
  <!--Open Graph Title-->
  <meta property="og:title" content="查询用例" />
  <!--Open Graph Description-->
  <meta property="og:description" content="拿起相机，认真思考" />
  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="照片集" />
  <!--Type page-->
  
  <meta property="og:type" content="article" />
  
  <!--Page Cover-->
  
  <meta property="og:image" content="https://github.com/lfkdsk/picx-images-hosting/raw/master/20230817/IMG_7586.4e91my1ve140.17iz0sa56gik.webp" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- Title -->
  
  <title>查询用例 - 照片集</title>
  <!-- 添加到主屏后的标题（iOS 6 新增） -->
  <meta name="apple-mobile-web-app-title" content="照片集">
  <!-- 是否启用 WebApp 全屏模式 -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <link rel="apple-touch-startup-image" href="/assets/ splash-assets.png" media="(max-device-width: 700px)">
  <!-- 禁止数字识自动别为电话号码 -->
  <meta name="format-detection" content="telephone=no" />
  <link rel="shortcut icon" href="https://imgur.lzmun.com/picgo/after2022/tripper2whitefull.png_avatar">
  <!--Apple iOS Safari ICON-->
  <link rel="apple-touch-icon" sizes="57x57" href="https://imgur.lzmun.com/picgo/after2022/tripper2color.png_iPhone" />
  <link rel="apple-touch-icon" sizes="72x72" href="https://imgur.lzmun.com/picgo/after2022/tripper2color.png_RetinaiPad" />
  <link rel="apple-touch-icon" sizes="114x114" href="https://imgur.lzmun.com/picgo/after2022/tripper2color.png_iPhoneHD" />
  <link rel="apple-touch-icon" sizes="144x144" href="https://imgur.lzmun.com/picgo/after2022/tripper2color.png_RetinaiPad" />
  <!-- 添加 RSS 订阅 -->
  <link rel="alternate" type="application/rss+xml" title="照片集" href="/rss" />
  <!-- uc强制竖屏 -->
  <meta name="screen-orientation" content="portrait">
  <!-- QQ强制竖屏 -->
  <meta name="x5-orientation" content="portrait">
  <!-- UC强制全屏 -->
  <meta name="full-screen" content="yes">
  <!-- QQ强制全屏 -->
  <meta name="x5-fullscreen" content="true">
  <!-- UC应用模式 -->
  <meta name="browsermode" content="application">
  <!-- QQ应用模式 -->
  <meta name="x5-page-mode" content="app">
  <!-- https://material.io/resources/icons/?style=outline -->
  
  
  <script src="https://lf1-cdn-tos.bytegoofy.com/obj/iconpark/icons_29703_14.95e63f49ecd5a866541aee0cf8ec0fac.js"></script>
  
  
<style>
  .itp-gallery-title,
  .itp-gallery-subtitle,
  .itp-post-title,
  .itp-post-entry-title,
  .itp-post-entry-subtitle,
  .itp-mag-logo,
  .itp-index-title,
  .itp-post-entry-moment,
  .itp-header-actions-menu {
    font-family: ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Noto Sans,Ubuntu,Cantarell,Helvetica Neue,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Noto Sans,Ubuntu,Cantarell,Helvetica Neue,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;
  }

  .itp-header-title,
  .itp-m3-post-entry-info .title,
  .itp-header-actions,
  .itp-cover-title,
  .itp-cover-subtitle,
  .itp-post-subtitle,
  .itp-post-entry-title,
  .itp-m3-cover-subtitle,
  .itp-m3-cover-title,
  .itp-gallery-info .title,
  .footer-info {
    font-family: ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Noto Sans,Ubuntu,Cantarell,Helvetica Neue,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Noto Sans,Ubuntu,Cantarell,Helvetica Neue,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;
  }

  .article,
  .itp-post-entry-excerpt {
    font-family: 'SF UI Display', '.PingFang SC', 'PingFang SC', 'Neue Haas Grotesk Text Pro', 'Arial Nova', 'Segoe UI', 'Microsoft YaHei', 'Microsoft JhengHei', 'Helvetica Neue', 'Source Han Sans SC', 'Noto Sans CJK SC', 'Source Han Sans CN', 'Noto Sans SC', 'Source Han Sans TC', 'Noto Sans CJK TC', 'Helvetica', 'Hiragino Sans GB', sans-serif;
  }
</style>

  <!-- Custom CSS/Sass -->
  
<link rel="stylesheet" href="/gallery/css/style.css">

  
<link rel="stylesheet" href="/gallery/css/fancybox.css">

  <!--样式切换-->
  
  
<link rel="stylesheet" href="/gallery/css/material3.css">

  
  
  
  
  
  <!--highlight.js CSS-->
  
  
<link rel="stylesheet" href="/gallery/css/highlight/github.css">

  
  
  <!-- jquery -->
  
  <script src="/gallery/js/jquery.min.js"></script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"/>
  <!--Comment-->
  
  <!--Vercel Audiences Analytics-->
  
  <!--umami analytics-->
  
  <script src="js/tools.js"></script>
  <!--Howxm Analytics-->
  
  
  
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-8TMSDJG47Q" defer></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-8TMSDJG47Q');
  </script>
  
  
  
  
  <link rel="manifest" href="/gallery/manifest.json">
  <meta name="theme-color" content="#71afdd">
  
  <!-- Google Search Advanced
  https://developers.google.com/search/docs/advanced/structured-data/search-gallery
  -->
  
  
  
  
  
  <!--<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      spacing: {
        '1': '8px',
        '2': '12px',
        '3': '16px',
        '4': '24px',
        '5': '32px',
        '6': '48px',
      },
      container: {
        center: true,
      },
      extend: {
        colors: {
          tblack: '#222831',
        },
        boxShadow: {
          'itp': '1px 10px 30px 0 rgb(0 0 0 / 10%)',
        }
      }
    }
  }
</script>-->

<link rel="stylesheet" href="/gallery/css/tailwind.css">

<meta name="generator" content="Hexo 6.0.0"></head>


<!--Other Pages-->


<body>
  <!-- Nav -->
  


<div class="itp-float-bar">
  <!--所有页面都显示-->
  <a class="itp-float-bar-item rounded" href="/gallery/" title="照片集">
    
    <iconpark-icon class="navicon" name="home"></iconpark-icon>
    
  </a>
  
  <!--只在 **非文章** 页面显示-->
  
  <a class="itp-float-bar-item rounded" href="/gallery/location" title="地图">
    
    <iconpark-icon class="navicon" name="local-two"></iconpark-icon>
    
  </a>
  
  <a class="itp-float-bar-item rounded" href="https://lfkdsk.github.io" title="归档">
    
    <iconpark-icon class="navicon" name="inbox"></iconpark-icon>
    
  </a>
  
  <a class="itp-float-bar-item rounded" href="/gallery/random" title="随机">
    
    <iconpark-icon class="navicon" name="pic"></iconpark-icon>
    
  </a>
  
  
  

  <div class="itp-float-layer itp-toc-layer">
    <div class="clost-btn" style="display: flex;">
      <a class="itp-float-layer-close-btn" id="close_btn">
        <div class="close_btn_red">
        </div>
      </a>
    </div>
    <ol class="itp-layer-toc"><li class="itp-layer-toc-item itp-layer-toc-level-2"><a class="itp-layer-toc-link" href="#GROUP-ALL-IMAGE-MAKER"><span class="itp-layer-toc-text">Group all image maker</span></a></li><li class="itp-layer-toc-item itp-layer-toc-level-2"><a class="itp-layer-toc-link" href="#GROUP-BY-FOCAL-LENGTH-AND-ORDER-BY-COUNT"><span class="itp-layer-toc-text">Group by focal length and order by count.</span></a></li><li class="itp-layer-toc-item itp-layer-toc-level-2"><a class="itp-layer-toc-link" href="#GIVE-ME-RANDOM-5-FUJIFILM-PICTURE"><span class="itp-layer-toc-text">Give me random 5 fujifilm picture</span></a></li><li class="itp-layer-toc-item itp-layer-toc-level-2"><a class="itp-layer-toc-link" href="#GET-N-GROUP-BY-F-NUMBER"><span class="itp-layer-toc-text">Get N group by F Number</span></a></li><li class="itp-layer-toc-item itp-layer-toc-level-2"><a class="itp-layer-toc-link" href="#GROUP-BY-COUNTRY"><span class="itp-layer-toc-text">Group by country</span></a></li></ol>
  </div>
  <div class="itp-float-layer-bg layer-bg-nodisplay" id="close_layer"></div>
</div>


<style>
  .navicon {
    font-size: 18px;
    padding-top: 18px;
    color: var(--main-black);
  }
</style>
  <!-- Main Content -->
  

<section class="pjax-area">
  <div class="content-area post-content-area">
    <div class=" left-area"></div>
    <div class="main-area">
      <div class="itp-m3-card post-cover">
        <div class="itp-m3-card-cover">
          <div class="itp-m3-cover-bg" style="
          /* background-image: url(https://imgur.lzmun.com/picgo/after2022/6DD1FBC3-AD8A-4340-842D-6ACF531F8291_1_105_c.jpeg_itp); */
          background-size: cover;
          background-position: center center;
        ">
            <div class="itp-m3-card-cover-layer ">
              <div class="info-area pjax-area">
                <div class="itp-m3-cover-avatar">
                  <img src="https://imgur.lzmun.com/picgo/after2022/tripper2colorfull.png_avatar" class="nofancy">
                </div>
                <div class="itp-m3-cover-title" style="opacity: 1;">
                  查询用例
                </div>
                <div class="itp-m3-cover-subtitle" style="opacity: 0.8;">
                  
拿起相机，认真思考

                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article">
          <h2 id="GROUP-ALL-IMAGE-MAKER">Group all image maker</h2>
<pre><code class="language-sql">SELECT IFNULL(EXIFData.maker, 'NONE') AS maker, COUNT(*) AS count
FROM Photo
LEFT OUTER JOIN EXIFData ON Photo.exif_data_id = EXIFData.id
GROUP BY maker
ORDER BY maker
</code></pre>
<p><a href="query?sql=SELECT%20IFNULL(EXIFData.maker,%20%27NONE%27)%20AS%20maker,%20COUNT(*)%20AS%20count%20FROM%20Photo%20LEFT%20OUTER%20JOIN%20EXIFData%20ON%20Photo.exif_data_id%20=%20EXIFData.id%20GROUP%20BY%20maker%20ORDER%20BY%20maker">TRY IT</a></p>
<h2 id="GROUP-BY-FOCAL-LENGTH-AND-ORDER-BY-COUNT">Group by focal length and order by count.</h2>
<pre><code class="language-sql">SELECT EXIFData.focal_length, COUNT(*) AS count
FROM Photo
LEFT OUTER JOIN EXIFData ON Photo.exif_data_id = EXIFData.id
WHERE Photo.exif_data_id IS NOT NULL OR Photo.exif &lt;&gt; ''
GROUP BY EXIFData.focal_length
ORDER BY CAST(EXIFData.focal_length as DOUBLE) DESC
</code></pre>
<p><a href="query?sql=%22SELECT%20EXIFData.focal_length,%20COUNT(*)%20AS%20count%20FROM%20Photo%20LEFT%20OUTER%20JOIN%20EXIFData%20ON%20Photo.exif_data_id%20=%20EXIFData.id%20WHERE%20Photo.exif_data_id%20IS%20NOT%20NULL%20OR%20Photo.exif%20%3C%3E%20%27%27%20GROUP%20BY%20EXIFData.focal_length%20ORDER%20BY%20CAST(EXIFData.focal_length%20as%20DOUBLE)%20DESC%22">TRY IT</a></p>
<h2 id="GIVE-ME-RANDOM-5-FUJIFILM-PICTURE">Give me random 5 fujifilm picture</h2>
<pre><code class="language-sql">SELECT photo.*, exifdata.maker
FROM photo
LEFT OUTER JOIN exifdata
ON photo.exif_data_id = exifdata.id
WHERE photo.location_id NOT NULL AND
exifdata.maker = 'FUJIFILM' ORDER BY RANDOM() LIMIT 5;
</code></pre>
<p><a href="query?sql=%22SELECT%20photo.*,%20exifdata.maker%20FROM%20photo%20LEFT%20OUTER%20JOIN%20exifdata%20ON%20photo.exif_data_id%20=%20exifdata.id%20WHERE%20photo.location_id%20NOT%20NULL%20AND%20exifdata.maker%20=%20%27FUJIFILM%27%20ORDER%20BY%20RANDOM()%20LIMIT%205;%22">TRY IT</a></p>
<h2 id="GET-N-GROUP-BY-F-NUMBER">Get N group by F Number</h2>
<pre><code class="language-sql">SELECT id, path, name, desc, f_number, lo, hi
FROM (
  SELECT p.id, p.path, p.name, p.desc, e.f_number, l.lo, l.hi,
         ROW_NUMBER() OVER (PARTITION BY e.f_number ORDER BY p.id) AS row_num
  FROM photo p
  JOIN exifdata e ON p.exif_data_id = e.id
  LEFT JOIN location l ON p.location_id = l.id
) subquery
WHERE row_num &lt;= 10;
</code></pre>
<p><a href="query?sql=%22SELECT%20id,%20path,%20name,%20desc,%20f_number,%20lo,%20hi%20FROM%20(%20SELECT%20p.id,%20p.path,%20p.name,%20p.desc,%20e.f_number,%20l.lo,%20l.hi,%20ROW_NUMBER()%20OVER%20(PARTITION%20BY%20e.f_number%20ORDER%20BY%20p.id)%20AS%20row_num%20FROM%20photo%20p%20JOIN%20exifdata%20e%20ON%20p.exif_data_id%20=%20e.id%20LEFT%20JOIN%20location%20l%20ON%20p.location_id%20=%20l.id%20)%20subquery%20WHERE%20row_num%20%3C=%2010;%22">TRY IT</a></p>
<h2 id="GROUP-BY-COUNTRY">Group by country</h2>
<pre><code class="language-sql">SELECT country, COUNT(*) as count 
FROM location 
GROUP BY country
</code></pre>
<p><a href="query?sql=%22SELECT%20country,%20COUNT(*)%20as%20count%20FROM%20location%20GROUP%20BY%20country%22">TRY IT</a></p>

        </div>
        <div class="itp-m3-post-info_area">
          <div class="info_area-category">
            
            
          </div>
          <div class="info_area-copyright">
            <p>本文著作权归作者&nbsplfkdsk&nbsp所有，转载或引用请联系作者获得授权。</p>
          </div>
        </div>
      </div>
      
    </div>
    <!-- <div class="right-area">
      
      

<div id="column-toc-m3" class="noprn column-toc-m3 itp-toc-m3-sidetop">
  <ol class="itp-toc"><li class="itp-toc-item itp-toc-level-2"><a class="itp-toc-link" href="#GROUP-ALL-IMAGE-MAKER"><span class="itp-toc-text">Group all image maker</span></a></li><li class="itp-toc-item itp-toc-level-2"><a class="itp-toc-link" href="#GROUP-BY-FOCAL-LENGTH-AND-ORDER-BY-COUNT"><span class="itp-toc-text">Group by focal length and order by count.</span></a></li><li class="itp-toc-item itp-toc-level-2"><a class="itp-toc-link" href="#GIVE-ME-RANDOM-5-FUJIFILM-PICTURE"><span class="itp-toc-text">Give me random 5 fujifilm picture</span></a></li><li class="itp-toc-item itp-toc-level-2"><a class="itp-toc-link" href="#GET-N-GROUP-BY-F-NUMBER"><span class="itp-toc-text">Get N group by F Number</span></a></li><li class="itp-toc-item itp-toc-level-2"><a class="itp-toc-link" href="#GROUP-BY-COUNTRY"><span class="itp-toc-text">Group by country</span></a></li></ol>
</div>

      
    </div> -->
  </div>
  
  <!--
<div class="mdui-dialog" id="shareDialogText" style="text-align: center;">
  <div class="itp-share-card" id="shareInfo">
    <div class="itp-share-cover" style="background: url('https://imgur.lzmun.com/picgo/after2022/6DD1FBC3-AD8A-4340-842D-6ACF531F8291_1_105_c.jpeg_itp');">
      <div class="itp-share-layer">
        <div class="itp-share-info">
          <div class="itp-share-avatar">
            <img src="https://imgur.lzmun.com/picgo/after2022/tripper2colorfull.png_avatar" class="nofancy">
          </div>
          <div class="itp-share-title">查询用例</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="mdui-dialog" id="shareDialogImg" style="text-align: center;">
  分享图已生成
</div>-->
</section>
  <!-- Footer -->
  <!-- Footer -->
<footer class="itp-footer text-center">
  <section class="footer-info">
    照片集 &copy; 2017 - 2023
    
    
    
    <span> / </span>
    <span id="busuanzi_container_site_pv">PV <span id="busuanzi_value_site_pv"></span></span>
    <span id="busuanzi_container_site_uv">UV <span id="busuanzi_value_site_uv"></span></span>
    
    <span> / Template</span>
    <a href="https://github.com/lfkdsk/album_template" target="_blank">Type
    </a>
  </section>
  
    <a href="https://lfkdsk.github.io/" target="_blank">
      <img width="80px" height="80px" style="padding-top: 12px; display: block; margin: 0 auto;" src="https://github.com/lfkdsk/picx-images-hosting/raw/master/20230817/tripper2white.2pbuwaqvndu0.webp" alt="footer logo"></a>
  
</footer>
  <!-- After footer scripts -->
  <!-- fancybox -->

<link rel="stylesheet" href="" />
<script src="/gallery/js/fancybox.umd.js" defer></script>

<!-- mdui -->

<!-- busuanzi -->

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script>

<!-- highlightjs -->


<script src="/gallery/js/highlight.min.js"></script>

<script>window.addEventListener('load', () => {
  hljs.highlightAll(); // initialize highlighting
});</script>
<script>
  $("pre.code").each(function() {
    $(this).html("<ol><li>" + $(this).html().replace(/\n/g, "\n</li><li>") + "\n</li></ol>");
  });
</script>



<script src="/gallery/js/app.js"></script>



<!--

<script src="/gallery/js/canvas2image.js"></script>


<script src="/gallery/js/shareimg.js"></script>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.js" defer></script>
-->
<!--lazyload-->


<script src="/gallery/js/lazyload.js"></script>


<!--PJAX-->
<!--Pjax from https://github.com/MoOx/pjax-->

<!--<script src="https://cdn.jsdelivr.net/npm/pjax/pjax.js"></script>-->
<!---->
<!---->
<!---->
<!---->
<!--首页键盘快捷键-->

  <style>
  :root {
    --main-color: #71AFDD;
    --sub-color: #6CD9CE;
    --main-black: #222831;
  }
</style>
</body>




</html>
